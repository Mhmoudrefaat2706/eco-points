<div
  class="login-container position-relative overflow-hidden min-vh-100"
  dir="ltr"
>
  <!-- Animated background elements -->
  <div class="position-absolute top-0 start-0 w-100 h-100">
    <div
      class="eco-bubble bubble-1"
      style="width: 150px; height: 150px; top: 15%; left: 10%"
    ></div>
    <div
      class="eco-bubble bubble-2"
      style="width: 200px; height: 200px; top: 25%; left: 15%"
    ></div>
    <div
      class="eco-bubble bubble-3"
      style="width: 150px; height: 150px; top: 50%; left: 70%"
    ></div>
    <div
      class="eco-bubble bubble-4"
      style="width: 200px; height: 200px; top: 60%; left: 80%"
    ></div>
  </div>

  <div
    class="container d-flex justify-content-center align-items-center h-100 position-relative"
    style="z-index: 2; max-width: 800px"
  >
    <div
      class="auth-card card p-4 p-md-5 shadow-lg"
      style="max-width: 600px; width: 100%"
    >
      <div class="auth-header text-center mb-4">
        <!-- Logo -->
        <div class="logo-container mb-4">
          <img
            src="../../../../assets/images/eco1-logo.jpeg"
            alt="Eco-Points Logo"
            class="eco-logo img-fluid fs-3"
          />
        </div>

        <h2
          class="display-6 fw-bold text-primary mb-2"
          style="font-size: 1.7rem"
        >
          Welcome Back to Eco-Points
        </h2>
        <p class="text-muted">Sign in to continue your eco-friendly journey</p>
      </div>

      <!-- Messages -->
      @if (logoutMessage) {
      <div class="alert alert-info text-center">
        {{ logoutMessage }}
      </div>
      } @if (errorMessage) {
      <div class="alert alert-danger text-center">
        {{ errorMessage }}
      </div>
      } @if (successMessage) {
      <div class="alert alert-success text-center">
        {{ successMessage }}
      </div>
      }

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <div class="input-group">
            <span class="input-group-text bg-white">
              <i class="bi bi-envelope text-muted"></i>
            </span>
            <input
              type="email"
              id="email"
              name="email"
              class="form-control"
              placeholder="example@email.com"
              formControlName="email"
            />
          </div>
          @if(loginForm.get('email')?.getError('required') &&
          loginForm.get('email')?.touched) {
          <div class="text-danger small mt-1">Email is required.</div>
          } @if(loginForm.get('email')?.getError('email') &&
          loginForm.get('email')?.touched) {
          <div class="text-danger small mt-1">
            Please enter a valid email address.
          </div>
          }
        </div>

        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <div class="input-group">
            <span class="input-group-text bg-white">
              <i class="bi bi-lock text-muted"></i>
            </span>
            <input
              type="password"
              id="password"
              name="password"
              class="form-control"
              placeholder="••••••••"
              formControlName="password"
            />
          </div>
          @if(loginForm.get('password')?.getError('required') &&
          loginForm.get('password')?.touched) {
          <div class="text-danger small mt-1">Password is required.</div>
          } @if(loginForm.get('password')?.getError('minlength') &&
          loginForm.get('password')?.touched) {
          <div class="text-danger small mt-1">
            Must be at least 6 characters.
          </div>
          }
        </div>

        <div class="d-flex justify-content-between align-items-center mb-4">
          <div class="form-check">
            <input
              type="checkbox"
              id="rememberMe"
              class="form-check-input"
              name="rememberMe"
            />
            <label for="rememberMe" class="form-check-label">Remember me</label>
          </div>
          <a routerLink="/forgot-password" class="text-decoration-none small"
            >Forgot password?</a
          >
        </div>

        <button
          type="submit"
          class="btn btn-primary w-100 py-2 fw-bold"
          [disabled]="loginForm.invalid || isLoading"
        >
          @if (!isLoading) {
          <span>Sign In</span>
          } @if (isLoading) {
          <span
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
          ></span>
          <span class="ms-2">Signing in...</span>
          }
        </button>

        <div class="d-flex align-items-center my-4">
          <hr class="flex-grow-1" />
          <span class="px-3 text-muted small">or</span>
          <hr class="flex-grow-1" />
        </div>

        <div class="d-grid gap-2 mb-4">
          <button type="button" class="btn btn-social btn-google">
            <i class="bi bi-google me-2"></i> Continue with Google
          </button>
          <button type="button" class="btn btn-social btn-facebook">
            <i class="bi bi-facebook me-2"></i> Continue with Facebook
          </button>
        </div>

        <div class="text-center mt-3">
          <p class="mb-0">
            Don't have an account?
            <a routerLink="/register" class="text-decoration-none fw-bold"
              >Sign up</a
            >
          </p>
        </div>
      </form>
    </div>
  </div>
</div>
